<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>loading</title>
</head>
<body>
	<canvas id="loading" width="500" height="500">
		您的浏览器不支持canvas
	</canvas>

	<script type="text/javascript" charset="utf-8" async defer>
		window.onload=function () {
			var c = document.getElementById("loading");
			var ctx = c.getContext('2d');
			var cx = c.width/2,
			cy = c.height/2;
			var pie = 0.1;

			function text(pie){
				ctx.save();
				ctx.fillStyle="#F47C7C";
				ctx.font="40px Arial";
				ctx.textAlign="center";
				ctx.textBaseline="middle";
				ctx.fillText(pie.toFixed(0)+"%",cx,cy);
				ctx.restore();
			}
			function blueCircle(pie){
				ctx.save();
				ctx.beginPath();
				ctx.strokeStyle="#49f";
				ctx.lineWidth = 12;
				ctx.arc(cx,cy,100,-Math.PI/2,-Math.PI/2+pie*Math.PI*2/100,false);
				ctx.stroke();
				ctx.closePath();
				ctx.restore();
			}
			function whiteCircle(){
				ctx.save();
				ctx.beginPath();
				ctx.strokeStyle="#9dd5df";
				ctx.lineWidth = 12;
				ctx.arc(cx,cy,100,-Math.PI/2,-Math.PI/2+2*Math.PI);
				ctx.stroke();
				ctx.closePath();
				ctx.restore();
			}
			// requestAnimationFrame根据浏览器刷新频率循环
			(function draw(){
				window.requestAnimationFrame(draw);
				ctx.clearRect(0,0,c.width,c.height);
			
				whiteCircle();
				text(pie);
				blueCircle(pie);

				if(pie>100)
					pie=0.1;
				pie+=0.1;
			}())
		}
	</script>
</body>
</html>